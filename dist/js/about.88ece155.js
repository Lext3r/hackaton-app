(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"11a0":function(t,e,s){"use strict";var a=s("fda1"),i=s.n(a);i.a},"421b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.item?a("div",{staticClass:"wrapper item__wrapper"},[a("div",{staticClass:"page__title"},[t._v("Улучшения")]),a("div",{staticClass:"back_arrow",on:{click:function(e){return t.$router.push({name:"Improvments"})}}},[a("img",{attrs:{src:s("f4de")}})]),a("div",{staticClass:"imp__title"},[t._v(t._s(t.item.title))]),a("div",{staticClass:"imp__status"},[t._v(t._s(t.item.status))]),a("div",{staticClass:"imp__description"},[t._v(t._s(t.item.description))]),t.user?a("div",{staticClass:"imp__table"},[a("table",[a("tr",[a("td",[t._v("Автор:")]),a("td",[t._v(t._s(t.user.name||""))])]),a("tr",[a("td",[t._v("Категория:")]),a("td",[t._v(t._s(t.item.category))])]),a("tr",[a("td",[t._v("Дата создания:")]),a("td",[t._v(t._s(new Date(t.item.create_date).toLocaleDateString()))])])])]):t._e(),a("div",{staticClass:"imp__address"},[t._v(t._s(t.item.address))]),"Житель"!==t.current_user.role&&"Обработка"===t.item.status?a("div",{staticClass:"imp__buttons"},[a("button",{staticClass:"button submit",on:{click:function(e){return t.updateStatus("В работе")}}},[t._v("Взять в работу")])]):t._e(),t.current_user.id===t.item.responsible_id&&"В работе"===t.item.status?a("div",{staticClass:"imp__buttons"},[a("button",{staticClass:"button submit",on:{click:function(e){return t.updateStatus("Решено")}}},[t._v("Выполнено")])]):t._e(),a("p",{attrs:{align:"left"}},[t._v("Комментарии:")]),t.item.response&&t.item.response.length?t._l(t.item.response,(function(e,s){return a("div",{key:s,staticClass:"imp__comment"},[a("p",[t._v("Автор: Пользователь"+t._s(e.author_id))]),a("p",[t._v("Текст: "+t._s(e.text))])])})):t._e(),a("div",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Оставить комментарий:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"Укажите описание вашего улучшения",rows:"4",maxlength:"200"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._m(0)],2):t._e()},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"imp__buttons"},[s("button",{staticClass:"button submit"},[t._v("Отправить комментарий")])])}],n=s("5530"),r=s("2f62"),o={name:"ImprovmentCard",props:["id"],data:function(){return{isLikeActive:0,item:null,user:null,comment:""}},computed:Object(n["a"])({},Object(r["b"])(["current_user"])),watch:{item:function(t){this.getUserData(t.author_id)}},mounted:function(){var t=this;this.axios.get("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/"+this.id).then((function(e){var s=e.data;t.item=s})).catch((function(){return t.$router.push({name:"Improvments"})}))},methods:{getUserData:function(t){var e=this;this.axios.get("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/user/"+t).then((function(t){var s=t.data;e.user=s})).catch((function(t){return alert(t)}))},updateStatus:function(t){this.axios.put("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/"+this.id,Object(n["a"])(Object(n["a"])({},this.item),{},{status:t,responsible_id:this.current_user.id,close_date:"Решено"===t?(new Date).toISOString():""})).then((function(t){201!==t.status&&200!==t.status?alert("Произошла ошибка при отправке данных, пожалуйста повторите попытку."):location.reload()}))}}},c=o,u=(s("11a0"),s("2877")),_=Object(u["a"])(c,a,i,!1,null,null,null);e["default"]=_.exports},f4de:function(t,e,s){t.exports=s.p+"img/back-arrow.3a5557d2.svg"},fda1:function(t,e,s){}}]);
//# sourceMappingURL=about.88ece155.js.map