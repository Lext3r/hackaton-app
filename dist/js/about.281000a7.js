(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"11a0":function(t,s,e){"use strict";var a=e("fda1"),i=e.n(a);i.a},"421b":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.item?a("div",{staticClass:"wrapper item__wrapper"},[a("div",{staticClass:"page__title"},[t._v("Улучшения")]),a("div",{staticClass:"back_arrow",on:{click:function(s){return t.$router.push({name:"Improvments"})}}},[a("img",{attrs:{src:e("f4de")}})]),a("div",{staticClass:"imp__title"},[t._v(t._s(t.item.title))]),a("div",{staticClass:"imp__status"},[t._v(t._s(t.item.status))]),a("div",{staticClass:"imp__description"},[t._v(t._s(t.item.description))]),t.user?a("div",{staticClass:"imp__table"},[a("table",[a("tr",[a("td",[t._v("Автор:")]),a("td",[t._v(t._s(t.user.name||""))])]),a("tr",[a("td",[t._v("Категория:")]),a("td",[t._v(t._s(t.item.category))])]),a("tr",[a("td",[t._v("Дата создания:")]),a("td",[t._v(t._s(new Date(t.item.create_date).toLocaleDateString()))])])])]):t._e(),a("div",{staticClass:"imp__address"},[t._v(t._s(t.item.address))]),"Житель"!==t.current_user.role&&"Обработка"===t.item.status?a("div",{staticClass:"imp__buttons"},[a("button",{staticClass:"button submit",on:{click:function(s){return t.updateStatus("В работе")}}},[t._v("Взять в работу")])]):t._e(),t.current_user.id===t.item.responsible_id&&"В работе"===t.item.status?a("div",{staticClass:"imp__buttons"},[a("button",{staticClass:"button submit",on:{click:function(s){return t.updateStatus("Решено")}}},[t._v("Выполнено")])]):t._e(),a("p",{attrs:{align:"left"}},[t._v("Комментарии:")]),t.item.response&&t.item.response.length?t._l(t.item.response,(function(s,e){return a("div",{key:e,staticClass:"imp__comment"},[a("p",[t._v("Автор: Пользователь"+t._s(s.author_id))]),a("p",[t._v("Текст: "+t._s(s.text))])])})):t._e(),t._m(0),t._m(1)],2):t._e()},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Оставить комментарий:")]),e("textarea",{attrs:{placeholder:"Укажите описание вашего улучшения",rows:"4",maxlength:"150"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"imp__buttons"},[e("button",{staticClass:"button submit"},[t._v("Отправить комментарий")])])}],n=e("5530"),r=e("2f62"),c={name:"ImprovmentCard",props:["id"],data:function(){return{isLikeActive:0,item:null,user:null}},computed:Object(n["a"])({},Object(r["b"])(["current_user"])),watch:{item:function(t){this.getUserData(t.author_id)}},mounted:function(){var t=this;this.axios.get("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/"+this.id).then((function(s){var e=s.data;t.item=e})).catch((function(){return t.$router.push({name:"Improvments"})}))},methods:{getUserData:function(t){var s=this;this.axios.get("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/user/"+t).then((function(t){var e=t.data;s.user=e})).catch((function(t){return alert(t)}))},updateStatus:function(t){this.axios.put("https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/"+this.id,Object(n["a"])(Object(n["a"])({},this.item),{},{status:t,responsible_id:this.current_user.id,close_date:"Решено"===t?(new Date).toISOString():""})).then((function(t){201!==t.status&&200!==t.status?alert("Произошла ошибка при отправке данных, пожалуйста повторите попытку."):location.reload()}))}}},u=c,o=(e("11a0"),e("2877")),_=Object(o["a"])(u,a,i,!1,null,null,null);s["default"]=_.exports},f4de:function(t,s,e){t.exports=e.p+"img/back-arrow.f0fe892c.svg"},fda1:function(t,s,e){}}]);
//# sourceMappingURL=about.281000a7.js.map