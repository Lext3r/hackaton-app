{"version":3,"sources":["webpack:///./src/views/ImprovmentItem.vue?c0d6","webpack:///./src/views/ImprovmentItem.vue?a014","webpack:///src/views/ImprovmentItem.vue","webpack:///./src/views/ImprovmentItem.vue?0311","webpack:///./src/views/ImprovmentItem.vue","webpack:///./src/assets/images/back-arrow.svg"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","$event","$router","push","name","attrs","_s","item","title","status","description","user","category","Date","create_date","toLocaleDateString","_e","address","current_user","role","updateStatus","id","responsible_id","response","length","_l","index","key","author_id","text","_m","staticRenderFns","component","module","exports"],"mappings":"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","file":"js/about.281000a7.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImprovmentItem.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImprovmentItem.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.item)?_c('div',{staticClass:\"wrapper item__wrapper\"},[_c('div',{staticClass:\"page__title\"},[_vm._v(\"Улучшения\")]),_c('div',{staticClass:\"back_arrow\",on:{\"click\":function($event){return _vm.$router.push({name: 'Improvments'})}}},[_c('img',{attrs:{\"src\":require(\"../assets/images/back-arrow.svg\")}})]),_c('div',{staticClass:\"imp__title\"},[_vm._v(_vm._s(_vm.item.title))]),_c('div',{staticClass:\"imp__status\"},[_vm._v(_vm._s(_vm.item.status))]),_c('div',{staticClass:\"imp__description\"},[_vm._v(_vm._s(_vm.item.description))]),(_vm.user)?_c('div',{staticClass:\"imp__table\"},[_c('table',[_c('tr',[_c('td',[_vm._v(\"Автор:\")]),_c('td',[_vm._v(_vm._s(_vm.user.name || ''))])]),_c('tr',[_c('td',[_vm._v(\"Категория:\")]),_c('td',[_vm._v(_vm._s(_vm.item.category))])]),_c('tr',[_c('td',[_vm._v(\"Дата создания:\")]),_c('td',[_vm._v(_vm._s(new Date(_vm.item.create_date).toLocaleDateString()))])])])]):_vm._e(),_c('div',{staticClass:\"imp__address\"},[_vm._v(_vm._s(_vm.item.address))]),(_vm.current_user.role !== 'Житель' && _vm.item.status === 'Обработка')?_c('div',{staticClass:\"imp__buttons\"},[_c('button',{staticClass:\"button submit\",on:{\"click\":function($event){return _vm.updateStatus('В работе')}}},[_vm._v(\"Взять в работу\")])]):_vm._e(),(_vm.current_user.id === _vm.item.responsible_id && _vm.item.status === 'В работе')?_c('div',{staticClass:\"imp__buttons\"},[_c('button',{staticClass:\"button submit\",on:{\"click\":function($event){return _vm.updateStatus('Решено')}}},[_vm._v(\"Выполнено\")])]):_vm._e(),_c('p',{attrs:{\"align\":\"left\"}},[_vm._v(\"Комментарии:\")]),(_vm.item.response && _vm.item.response.length)?_vm._l((_vm.item.response),function(response,index){return _c('div',{key:index,staticClass:\"imp__comment\"},[_c('p',[_vm._v(\"Автор: Пользователь\"+_vm._s(response.author_id))]),_c('p',[_vm._v(\"Текст: \"+_vm._s(response.text))])])}):_vm._e(),_vm._m(0),_vm._m(1)],2):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-input\"},[_c('span',{staticClass:\"form-input__label\"},[_vm._v(\"Оставить комментарий:\")]),_c('textarea',{attrs:{\"placeholder\":\"Укажите описание вашего улучшения\",\"rows\":\"4\",\"maxlength\":\"150\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"imp__buttons\"},[_c('button',{staticClass:\"button submit\"},[_vm._v(\"Отправить комментарий\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"wrapper item__wrapper\" v-if=\"item\" v-cloak>\r\n        <div class=\"page__title\">Улучшения</div>\r\n        <div class=\"back_arrow\" @click=\"$router.push({name: 'Improvments'})\"><img src=\"../assets/images/back-arrow.svg\" /></div>\r\n        <div class=\"imp__title\">{{item.title}}</div>\r\n        <div class=\"imp__status\">{{item.status}}</div>\r\n        <div class=\"imp__description\">{{item.description}}</div>\r\n        <div class=\"imp__table\" v-if=\"user\">\r\n            <table>\r\n                <tr>\r\n                    <td>Автор:</td>\r\n                    <td>{{user.name || ''}}</td>\r\n                </tr>\r\n                \r\n                <tr>\r\n                    <td>Категория:</td>\r\n                    <td>{{item.category}}</td>\r\n                </tr>\r\n\r\n                <tr>\r\n                    <td>Дата создания:</td>\r\n                    <td>{{new Date(item.create_date).toLocaleDateString()}}</td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"imp__address\">{{item.address}}</div>\r\n        <div class=\"imp__buttons\" v-if=\"current_user.role !== 'Житель' && item.status === 'Обработка'\">\r\n            <button class=\"button submit\" @click=\"updateStatus('В работе')\">Взять в работу</button>\r\n        </div>\r\n        <div class=\"imp__buttons\" v-if=\"current_user.id === item.responsible_id && item.status === 'В работе'\">\r\n            <button class=\"button submit\" @click=\"updateStatus('Решено')\">Выполнено</button>\r\n        </div>\r\n        <p align=\"left\" >Комментарии:</p> \r\n        <template v-if=\"item.response && item.response.length\">\r\n            <div class=\"imp__comment\" v-for=\"(response, index) in item.response\" :key=\"index\">\r\n                <p>Автор: Пользователь{{response.author_id}}</p>\r\n                <p>Текст: {{response.text}}</p>\r\n            </div>\r\n        </template>\r\n        <div class=\"form-input\">\r\n            <span class=\"form-input__label\">Оставить комментарий:</span>\r\n            <textarea placeholder=\"Укажите описание вашего улучшения\" rows=\"4\" maxlength=\"150\" />\r\n        </div>\r\n        <div class=\"imp__buttons\">\r\n            <button class=\"button submit\">Отправить комментарий</button>\r\n        </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {mapGetters} from 'vuex';\r\nexport default {\r\n    name: 'ImprovmentCard',\r\n    props: ['id'],\r\n    data() {\r\n        return {\r\n            isLikeActive: 0,\r\n            item: null,\r\n            user: null,\r\n        }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n            'current_user',\r\n        ])\r\n    },\r\n    watch: {\r\n        item(val) {\r\n            this.getUserData(val.author_id);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.axios.get('https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/' + this.id).then(({data: task}) => {\r\n            this.item = task;\r\n        })\r\n        .catch(() => this.$router.push({name: 'Improvments'}));\r\n    },\r\n    methods: {\r\n        getUserData(id) {\r\n            this.axios.get('https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/user/' + id).then(({data: user}) => {\r\n            this.user = user;\r\n        })\r\n        .catch(e => alert(e));\r\n        },\r\n        updateStatus(status) {\r\n            this.axios.put('https://5edab48398b7f500160dc847.mockapi.io/hack-a-ton/task/' + this.id,{\r\n            ...this.item,\r\n            status: status,\r\n            responsible_id: this.current_user.id,\r\n            close_date: status === 'Решено' ? new Date().toISOString() : '',\r\n          })\r\n          .then(response => { \r\n              if (response.status !== 201 && response.status !== 200) {\r\n                  alert('Произошла ошибка при отправке данных, пожалуйста повторите попытку.')\r\n              } else {\r\n                  location.reload();\r\n              }\r\n          })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.item__wrapper {\r\n    padding: 0 16px;\r\n}\r\n .imp{\r\n     &__title {\r\n         font-size: 20px;\r\n         font-weight: bold;\r\n         margin-bottom: 24px;\r\n     }\r\n     &__status {\r\n         font-size: 14px;\r\n         margin-bottom: 16px; \r\n     }\r\n     &__description {\r\n         font-size: 14px;\r\n         margin-bottom: 32px;\r\n         color:#8F9399;\r\n     }\r\n     &__table{\r\n         padding: 0 16px;\r\n         margin-bottom: 40px;\r\n         table{\r\n             font-size: 14px;\r\n             text-align: left;\r\n             border-spacing: 16px 8px;\r\n             td:last-child {\r\n                 font-weight: bold;\r\n             }\r\n         }\r\n     }\r\n     &__address {\r\n         font-size: 16px;\r\n         font-weight: bold;\r\n         margin-bottom: 24px;\r\n     }\r\n     &__buttons {\r\n         padding: 0 16px;\r\n         margin-bottom: 36px;\r\n     }\r\n     &__comment {\r\n         text-align: left;\r\n         padding: 8px;\r\n         box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.15);\r\n         margin-bottom: 24px;\r\n     }\r\n }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImprovmentItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImprovmentItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImprovmentItem.vue?vue&type=template&id=56aadb14&\"\nimport script from \"./ImprovmentItem.vue?vue&type=script&lang=js&\"\nexport * from \"./ImprovmentItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImprovmentItem.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/back-arrow.f0fe892c.svg\";"],"sourceRoot":""}